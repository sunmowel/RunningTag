/*************************************************************************************************************
*                                              INCLUDE FILES                                                 *
*************************************************************************************************************/
#include <bsp.h>


/*************************************************************************************************************
*                                              LOCAL TABLES                                                  *
*************************************************************************************************************/
static CPU_INT32U BspSeed = 1; 


/*************************************************************************************************************
*                                            FUNCTION PROTOTYPES                                             *
*************************************************************************************************************/
void BspSrand (CPU_INT32U seed) 
{ 
    CPU_INT8U i;
    CPU_INT32U rand;
    CPU_INT16U value;
    
    BspAnalogOn();
    for (i = 0; i < 16; i++)
    {
        BspAnalogGetValue(&value);
        rand |= ((value & 0x0003) << (i * 2));
    }  
    BspAnalogOff();
    
    BspSeed = seed | rand;
}

CPU_INT16U BspRand (void) 
{ 
    CPU_INT16U rn;
    
    BspSeed = BSP_MULTIPLIER * BspSeed + BSP_INCREMENT;
    rn = ((CPU_INT16U)(BspSeed >> 8) & 0x7fff); 
    
    return rn; 
}


/*************************************************************************************************************
*                                               MODULE END                                                   *
*************************************************************************************************************/